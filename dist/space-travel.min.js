(()=>{var g=({width:t,height:e})=>[r(t),r(e)],y=t=>{let e=t.getContext("2d");e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0,0,0,0.2)",e.fillRect(0,0,t.width,t.height),e.translate(...g(t))},f=({color:t,velocity:e,speed:o,v:n})=>{let{x:i,y:h,z:s}=n;return{velocity:e,color:t,speed:o,x:i,y:h,z:s,v:n}},m=t=>[...Array(t).keys()],w=document.getElementById("space-canvas"),z=t=>{let e=t.getContext("2d");t.width=t.offsetWidth,t.height=t.offsetHeight,e.fillStyle="#000000",e.fillRect(0,0,t.width,t.height)},d=(t,e)=>Math.floor(Math.random()*e*2)+t,u=()=>"hsla(200,100%, "+d(50,100)+"%, 1)",r=t=>t/2,c=t=>({x:d(-r(t.width),r(t.width)),y:d(-r(t.height),r(t.height)),z:d(1,12)}),l=(t,e)=>({x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}),S=({v:t,velocity:e,speed:o})=>{let{x:n,y:i,z:h}=l(t,e);return{x:n/h,y:i/h,dx:n/(h+o*.5),dy:i/(h+o*.5),nextVector:l(t,e)}},C=t=>({...t,dv:S(t)}),p=(t,{x:e,y:o})=>e<-r(t.width)||e>r(t.width)||o<-r(t.height)||o>r(t.height),V=t=>e=>{let{dv:{x:o,y:n,nextVector:i}}=e;return p(t,{x:o,y:n})?{...e,v:c(t)}:{...e,v:i}},T=t=>({...t,...t.dv}),b=t=>({x:e,y:o,dx:n,dy:i,color:h})=>{let s=t.getContext("2d");s.strokeStyle=h,s.beginPath(),s.moveTo(e,o),s.lineTo(n,i),s.stroke()},k=Object.freeze({x:0,y:0,z:-.075}),x=(t,e)=>()=>{y(t);let o=e.map(C).map(V(t));o.map(T).forEach(b(t)),requestAnimationFrame(x(t,o))},E=t=>{z(t);let e=m(1e3).map(o=>f({velocity:k,speed:.075,color:u(),v:c(t)}));x(t,e)()};E(w);})();
